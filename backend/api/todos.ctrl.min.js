const express=require("express"),app=express(),cors=require("cors"),mysql=require("mysql"),connection=mysql.createConnection({host:"localhost",user:"root",password:"root"});app.use(cors()),connection.connect();const getCtrl=(req,res)=>{connection.query("SELECT * from study.todos",(function(err,rows,fields){if(err)throw err;res.send(rows),console.log(rows)}))},postCtrl=(req,res)=>{console.log(req.params),console.log(req.body);const userId=req.params.userId.trim(),title=req.body.title.trim();connection.query("insert into study.todos (userId,title,completed) value(?,?,'false')",[userId,title],(function(err,rows,fields){if(err)throw err;res.send(rows),console.log(rows)}))},patchCtrl=(req,res)=>{console.log(req.query);const{userId:userId,id:id}=req.params,completed=req.body.completed;connection.query("update study.todos set completed=? where userId=? and id=?",[completed,userId,id],(function(err,rows,fields){if(err)throw err;res.send(rows),console.log(rows)}))},delCtrl=(req,res)=>{console.log(req.params);const{userId:userId,id:id}=req.params;connection.query("delete from study.todos where userId=? and id=?",[userId,id],(function(err,rows,fields){if(err)throw err;res.send(rows),console.log(rows)}))};module.exports={getCtrl:getCtrl,postCtrl:postCtrl,patchCtrl:patchCtrl,delCtrl:delCtrl};